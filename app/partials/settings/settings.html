<div id="page-settings">
  <section class="section-padding" layout="column" layout-align="center center" style="background: #eee;">
    <div class="container" style="max-width:800px;">
      <div layout-gt-sm="row">
        <md-card flex-gt-sm="50">
          <md-card-title>
            <md-card-title-text>
              <span class="md-headline">Profilbilde</span>
            </md-card-title-text>
          </md-card-title>
          <md-card-content>
            <div layout="row" layout-align="center center">
              <div ng-if="!bildeUrlShow" style="width: 10rem; height: 10rem; border-radius: 50%;
              background: url({{user.bilde || 'assets/images/avatar.png'}}) center;
              background-size: cover; overflow: hidden; border: 0.3rem solid white;
              margin-bottom: 1em;">
              </div>
              <md-input-container ng-if="bildeUrlShow" flex>
                <textarea  columns="4" ng-model="user.bilde"></textarea>
              </md-input-container>
            </div>
            <md-card-actions layout="row" layout-align="end center">
                <md-button ng-click="bildeUrlShow = !bildeUrlShow; ">
                  Lagre bilde url
                </md-button>
              <md-button type="delete" class="md-warn" ng-click="user.bilde=''">Slett</md-button>
            </md-card-actions>
          </md-card-content>
        </md-card>
        <md-card flex-gt-sm="50">
          <md-card-title>
            <md-card-title-text>
              <span class="md-headline">CV</span>
            </md-card-title-text>
          </md-card-title>
          <md-card-content>
            <div ng-show="user.filer[0].navn">
              <i class="fa fa-file-o"></i>
              <label>{{filename}}</label>
            </div>
            <md-card-actions layout="row" layout-align="end center">
              <md-button>
                <label for="cv-input">Last opp</label>
              </md-button>
              <input id="cv-input" type="file" ng-hide=true nv-file-select uploader="uploader">
              <md-button class="md-warn" ng-click="deleteFile()">Slett</md-button>
            </md-card-actions>
          </md-card-content>
        </md-card>
      </div>
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Litt om meg</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content layout="row">
          <md-input-container flex>
            <label>Beskrivelse</label>
            <textarea name="bio" ng-model="user.bio" md-maxlength="500"></textarea>
            <div ng-messages="userForm.bio.$error" ng-show="userForm.bio.$dirty">
              <div ng-message="md-maxlength">Det er mer en nok!</div>
            </div>
          </md-input-container>
        </md-card-content>
      </md-card>
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Kontaktinformasjon</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
          <div layout-gt-sm="row">
            <md-input-container flex-gt-sm="50" class="md-block">
              <label>Telefonnummer</label>
              <input type="text" ng-model="user.tlf"
              ng-pattern="/^[0-9]{8}$/">
            </md-input-container>
            <md-input-container flex-gt-sm="50" class="md-block">
              <label>Epostadresse</label>
              <input type="email" ng-model="user.email">
            </md-input-container>
          </div>
          <div layout-gt-sm="row">
            <md-input-container class="md-block" flex-gt-sm="50">
              <label>Adresse</label>
              <input ng-model="user.adresse[0]">
            </md-input-container>
            <md-input-container class="md-block" flex="none">
              <label>Postnummer</label>
              <input name="postalCode" ng-model="user.adresse[1]"
              ng-pattern="/^[0-9]{4}$/">
            </md-input-container>
            <md-input-container class="md-block" flex="none">
              <label>Poststed</label>
              <input ng-model="user.adresse[2]">
            </md-input-container>
          </div>
        </md-card-content>
      </md-card>




      <md-list-item class="container" ng-repeat="card in cards" ng-init="cardIndex = $index">
        <md-card flex>
          <md-card-title>
            <md-card-title-text>
              <md-input-container>
                <label>Kategori</label>
                <textarea ng-model="cards[cardIndex][0]" ng-change="continueCards('head',cardIndex)"></textarea>
              </md-input-container>
            </md-card-title-text>
          </md-card-title>
          <md-card-content>
            <div layout-gt-sm="row" ng-repeat="row in cards[cardIndex][1]">
              <md-input-container flex="initial">
                <label>Hva</label>
                <textarea ng-model="cards[cardIndex][1][$index][0]" ng-change="continueCards('key',cardIndex, $index)"></textarea>
              </md-input-container>
              <md-input-container flex>
                <label>Beskrivelse</label>
                <input ng-model="cards[cardIndex][1][$index][1]" ng-change="continueCards('value',cardIndex, $index)">
              </md-input-container>
            </div>
          </md-card-content>
        </md-card>
      </md-list-item>



      <!--
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Eksterne lenker</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
          <div layout-gt-sm="row">
            <md-input-container flex="initial">
              <label>Lenkenavn</label>
              <textarea></textarea>
            </md-input-container>
            <md-input-container flex>
              <label>URL</label>
              <input>
            </md-input-container>
          </div>
          <div layout-gt-sm="row">
            <md-input-container flex="initial">
              <label>Lenkenavn</label>
              <input>
            </md-input-container>
            <md-input-container flex>
              <label>URL</label>
              <input>
            </md-input-container>
          </div>
        </md-card-content>
      </md-card>
      -->
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Tagger</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
          <et-tags requirematch=false selected-tags="user.tags" promise="promise"></et-tags>
        </md-card-content>
      </md-card>
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Knytt kontoer</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content layout="row" layout-align="center center">
          <script></script>
          <md-button class="fb-link md-raised" ng-if="!user.facebookId" ng-click="setCookie('/auth/connect/facebook')" style="color: #3b5998" aria-label="fb-login"><div class="link-img" layout-fill></div></md-button>
          <md-button class="google-link md-raised" ng-if="!user.googleId" ng-click="setCookie('/auth/connect/google')" style="color: #d62d20" aria-label="google-login"><div class="link-img" layout-fill></div></md-button>
          <md-button class="ntnu-link md-raised" ng-if="!user.feideId" ng-click="setCookie('/auth/connect/feide')" style="color: #0057e7" aria-label="ntnu-login"><div class="link-img" layout-fill></div></md-button>
        </md-card-content>
      </md-card>
      <md-button class="md-raised md-primary" ng-click="saveUser()">Lagre profil</md-button>
    </div>
  </section>
</div>
